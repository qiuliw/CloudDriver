# 文件上传问题调试指南

## 可能的问题原因

### 1. 连接问题
- 服务器未启动
- 端口号不正确
- 防火墙阻止连接
- 网络连接问题

### 2. 文件路径问题
- 文件路径包含中文字符
- 文件路径包含特殊字符
- 文件不存在或无法访问
- 权限问题

### 3. 服务器端问题
- 服务器目录不存在
- 服务器目录权限不足
- 磁盘空间不足

### 4. 消息传输问题
- 消息格式错误
- 网络传输中断
- 缓冲区问题

## 调试步骤

### 1. 检查服务器状态
```bash
# 检查服务器是否正在运行
netstat -an | findstr :8080  # 替换为你的端口号
```

### 2. 检查文件路径
- 确保文件路径正确
- 检查文件是否存在
- 检查文件权限

### 3. 查看日志输出
运行程序后，查看控制台输出的日志信息：
- `[INFO]` 消息显示正常流程
- `[WARN]` 消息显示警告
- `[ERROR]` 消息显示错误

### 4. 常见错误及解决方案

#### 错误：Failed to open file
**原因：** 文件路径错误或文件不存在
**解决：** 检查文件路径，确保文件存在

#### 错误：server openfile err
**原因：** 服务器无法创建文件
**解决：** 检查服务器目录权限和磁盘空间

#### 错误：bufferevent_read err
**原因：** 网络连接问题
**解决：** 检查网络连接和服务器状态

#### 错误：BEV_EVENT_ERROR or BEV_EVENT_TIMEOUT
**原因：** 连接超时或网络错误
**解决：** 检查服务器IP和端口，确保网络连接正常

## 测试建议

1. 先尝试上传一个小的文本文件
2. 确保服务器目录存在且有写权限
3. 检查防火墙设置
4. 使用简单的英文文件名进行测试

## 日志分析

运行程序后，请提供以下信息：
1. 客户端日志输出
2. 服务器端日志输出
3. 具体的错误信息
4. 使用的文件路径和大小
